---
title: "Lecture 1 - Linear Regression"
subtitle: "<br> Econometrics 1"
author: "Vincent Bagilet"
date: "2024-09-17"
output:
  xaringan::moon_reader:
    self_contained: true
    lib_dir: libs
    css: mediocre-themer.css
    nature:
      countIncrementalSlides: no
      highlightLines: yes
      highlightStyle: github
      ratio: '16:9'
      titleSlideClass: [right, middle, inverse]
---

```{r themer, include=FALSE}
library(tidyverse)
library(knitr)
library(xaringan)
library(mediocrethemes)
library(here)
library(sf)
library(mapview)
library(plotly)

# set knit directory to "Document directory"

xaringan_mediocre(pal = "portal")
```

class: right, middle

# Introduction

???

I introduce myself, they introduce themselves (ask them what they'd like to do later)

---
class: titled, middle

# Objectives

- Equip you with tools to quantitatively explore relevant social science questions

- Focus on intuitions

- Actual data sets, replications and simulated data

???

- Simulated data enable to know how the data is generated and therefore to study the influence of various factors and assumptions on the outcome of our analysis
- Provide you with tools to check hypotheses yourself

---
class: right, middle, inverse

# Taking Theory to Data

---
class: titled, middle

# Theory

- **Theory**: the output $Y_i$ of a firm $i$ is a function $F$ of the capital $K_i$ and labor $L_i$ it employs

- $\forall i \in \{1, .., n\}$,

$$Y_i = F(K_i, L_i) = \beta_0K^{\beta_{1}}L^{\beta_{2}}$$

- $\beta_0$: total factor of productivity

- $\beta_1$ and $\beta_2$:output elasticity of capital and labor

---
class: titled, middle

# To the Data

- Goals:

  - Assess the validity of this theory 
  
  - Quantify its parameters using observational data (**sign** and **magnitude**)
  
- Then, make general claims about the population : **inference**

---
class: titled, middle
# Steps of From Theory to Conclusion

Theory $\longrightarrow$ Modelling $\longleftrightarrow$ Data  $\longrightarrow$ Estimations $\longleftrightarrow$ Corrections $\longrightarrow$ Interpretation

---
class: titled, middle
# From theory to a model

- $F$ can be seen as a simplification of an unknown relationship called the **data generating process**

- All possible data generated by this relationship: the **population** 

- For practical reasons, we only observe a subset of the population: a **sample**

- We want the sample to be drawn **randomly** so that it is **representative**  of the population

---
class: titled, middle
layout:true

# An econometric model

---

- Based on our theory, we write an econometric model, $\forall i$:

$$Y_i = f(K_i, L_i) + \epsilon_i = \beta_0 K_i^{\beta_1} L_i^{\beta_2} + \epsilon_i$$
- $\epsilon$ is an **error** term: our model does not perfectly explain the output

- We can linearize this model by "taking the log":

$$ log(Y_i) = \beta_0 + \beta_1 \log(K_i)  + \beta_2 \log(L_i) + e_i \qquad \forall i \in \{1, .., n\}$$
---
class: titled, middle

$$ log(Y_i) = \beta_0 + \beta_1 \log(K_i)  + \beta_2 \log(L_i) + e_i \qquad \forall i \in \{1, .., n\}$$

<br>

- The **logarithm** transformation provides meaningful economic interpretation (*ie* elasticities)

- The **linearity** allows a simple interpretation of the parameters (*ie* unit-increase)

- The **additivity** ensures that parameters can be interpreted separately (*ie* ceteris paribus)

---
layout: false

# Summary

- Econometrics $\simeq$ methods to **approximate and interpret the data generation process**:

--

  1. Choose proxy variables for our theoretical quantities and collect a sample of observations
  
--
  
  1. Assume a functional form for the empirical model

--
  
  1. Fit the model to a sample of observations
  
--
  
  1. Interpret the sign and magnitude of the estimated parameters and draw conclusions

---
class: right, middle, inverse

# Logistics

---
# Website

```{r website, echo=FALSE}
knitr::include_url("https://vincentbagilet.github.io/metrics_m1_2024/", height = "450px")
```

<center>

https://vincentbagilet.github.io/metrics_m1_2024/

</center>

---
class: titled, middle

# Structure

- I will teach the 4 first lectures (`r fontawesome::fa("envelope")`  [vincent.bagilet@ens-lyon.fr](vincent.bagilet@ens-lyon.fr))

- Gaetan Bakalli: 4 last ones (`r fontawesome::fa("envelope")`  [bakalli@em-lyon.com](bakalli@em-lyon.com))

- Lucile Laugrette: a R TD (`r fontawesome::fa("envelope")`  [lucile.laugerette@gmail.com ](lucile.laugerette@gmail.com ))

---
class: titled, middle

# Outline

.pull-left[

### My section

1. Linear regression

1. OLS properties

1. Model specification

1. Covariates selection

]
.pull-right[

### Gaetan Bakalli's section

1. Convergence in probability

1. Asymptotic normality

1. Hypothesis testing - Theory

1. Hypothesis testing - Application

]

---
class: titled, middle

# A typical lecture

1. Introduce concepts, intuition

1. Exercise and application in R

1. A bit of maths

---

# Grading

.pull-left[
### Weekly Quizzes (20%)

- Every week, 10 min

- Easy => do not aim to penalize you

### Final Exam (40%)

Two parts:

1. Computer-based

1. Written test
]
.pull-right[
### Final Project (40%)

- In pairs

- Research question of your choice

- Short written report + notebook with your code

]

---
class: right, middle, inverse

# R: Why and How? 

---
class: titled, middle

# THE statistical analysis software

- Open source

- Can do anything linked to data: wrangling, cleaning, analyzing, visualizing, communicating

- Huge online community

- Packages for anything

---
# Massive capabilities

### Websites ([Quarto](https://quarto.org/)) and slides ([Quarto](https://quarto.org/), [Xaringan](https://slides.yihui.org/xaringan/#1))

```{r website_capab, echo=FALSE}
knitr::include_url("https://vincentbagilet.github.io/metrics_m1_2024/", height = "450px")
```

---
### Awesome graphs ([ggplot](https://ggplot2.tidyverse.org/))

.pull-left[
```{r t, echo=FALSE, out.width='60%', fig.align='center'}
knitr::include_graphics("images/ggplot_ex_small_multiples.png")
```
]
.pull-right[
```{r rayshader, echo=FALSE}
knitr::include_graphics("images/rayshader.jpeg")
# Credits : Terence Fosstodon
```
]

---
### Interactive graphs ([Plotly](https://plotly.com/r/)) 

```{r plotly, echo=FALSE, out.width='80%', fig.align='center'}
graph <- mpg |> 
  ggplot(aes(x = hwy, y = displ)) +
  geom_point() 

graph |> 
  plotly::ggplotly() |> 
  layout(plot_bgcolor='transparent')
```

---
### Interactive maps ([Leaflet](https://rstudio.github.io/leaflet/) and [Mapview](https://r-spatial.github.io/mapview/))

```{r map_ens, echo=FALSE, fig.align='center',  out.width='100%'}
tibble(long = 4.833428242327759, lat = 45.73360071410955) |> 
  sf::st_as_sf(
    coords = c("long", "lat"),
    crs = 4326
  ) |> 
  mapview::mapview(layer.name = "ENS")
```

---
### Interactive apps ([Shiny](https://shiny.posit.co/))

```{r shiny, echo=FALSE, fig.align='center'}
knitr::include_app("https://kaplanas.shinyapps.io/living_in_the_lego_world/", height = "480px")
```

---
layout: true

# Literate programming

---

- Combine code and natural language

```{r markdown_ex, echo=FALSE}
knitr::include_url("https://vincentbagilet.github.io/causal_exaggeration/RDD.html", height = "450px")
```

---

- R Package: [Quarto](https://quarto.org/)

- We will use this in this class

- Helpful for economic research. Allows to:

  - Clearly describe **why** your are doing what you are doing
  
  - Store details and information for future-self (data sources, data structure, etc)
  
  - Analyse your results
  
  - Communicate

---
class: titled, middle
layout: false

.pull-left[
```{r echo=FALSE, out.width=450, fig.align="center"} 
knitr::include_graphics(
  "images/r4ds.jpg"
)
```
]
.pull-right[
<br><br><br><br><br>
- Install R and RStudio. 

- Instructions [here](https://r4ds.hadley.nz/intro#prerequisites).

- A great recitation taught by Lucile Laugrette
]

<!-- --- -->
<!-- class: right, middle, inverse -->

<!-- # Exercise in R -->

---
class: right, middle, inverse

# Maths on the board

---
class: right, middle, inverse

# Lecture summary

---
class: titled, middle

# What did we learn today?

- How theory and applied research can weave together

- Usefulness of regression and its basics

- Econometrics $\simeq$ methods to **approximate and interpret the data generation process**

---
class: right, middle, inverse

# Thanks!

 





